"use strict";angular.module("btford.markdown",["ngSanitize"]).provider("markdownConverter",function(){var a={};return{config:function(b){a=b},$get:function(){return new Showdown.converter(a)}}}).directive("btfMarkdown",["$sanitize","markdownConverter",function(a,b){return{restrict:"AE",link:function(c,d,e){if(e.btfMarkdown)c.$watch(e.btfMarkdown,function(c){var e=c?a(b.makeHtml(c)):"";d.html(e)});else{var f=a(b.makeHtml(d.text()));d.html(f)}}}}]),function(a,b,c){function d(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return g(b,j(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function e(a){var c=[],d=j(c,b.noop);return d.chars(a),c.join("")}function f(a,c){var d,e={},f=a.split(",");for(d=0;d<f.length;d++)e[c?b.lowercase(f[d]):f[d]]=!0;return e}function g(a,c){function d(a,d,f,g){if(d=b.lowercase(d),z[d])for(;t.last()&&A[t.last()];)e("",t.last());y[d]&&t.last()==d&&e("",d),g=v[d]||!!g,g||t.push(d);var i={};f.replace(n,function(a,b,c,d,e){var f=c||d||e||"";i[b]=h(f)}),c.start&&c.start(d,i,g)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=t.length-1;f>=0&&t[f]!=d;f--);if(f>=0){for(e=t.length-1;e>=f;e--)c.end&&c.end(t[e]);t.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,g,i,j,t=[],u=a;for(t.last=function(){return t[t.length-1]};a;){if(j="",g=!0,t.last()&&C[t.last()]?(a=a.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+t.last()+"[^>]*>","i"),function(a,b){return b=b.replace(q,"$1").replace(s,"$1"),c.chars&&c.chars(h(b)),""}),e("",t.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),g=!1)):r.test(a)?(i=a.match(r),i&&(a=a.replace(i[0],""),g=!1)):p.test(a)?(i=a.match(m),i&&(a=a.substring(i[0].length),i[0].replace(m,e),g=!1)):o.test(a)&&(i=a.match(l),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(l,d)),g=!1):(j+="<",a=a.substring(1))),g&&(f=a.indexOf("<"),j+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(h(j)))),a==u)throw k("badparse","The sanitizer was unable to parse the following block of html: {0}",a);u=a}e()}function h(a){return a?(I.innerHTML=a.replace(/</g,"&lt;"),I.textContent):""}function i(a){return a.replace(/&/g,"&amp;").replace(t,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(u,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function j(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&C[a]&&(d=a),d||D[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,f){var g=b.lowercase(f),h="img"===a&&"src"===g||"background"===g;H[g]!==!0||E[g]===!0&&!c(d,h)||(e(" "),e(f),e('="'),e(i(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||D[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(i(a))}}}var k=b.$$minErr("$sanitize"),l=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,m=/^<\/\s*([\w:-]+)[^>]*>/,n=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,o=/^</,p=/^<\//,q=/<!--(.*?)-->/g,r=/<!DOCTYPE([^>]*?)>/i,s=/<!\[CDATA\[(.*?)]]>/g,t=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/([^\#-~| |!])/g,v=f("area,br,col,hr,img,wbr"),w=f("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),x=f("rp,rt"),y=b.extend({},x,w),z=b.extend({},w,f("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),A=b.extend({},x,f("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),B=f("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use"),C=f("script,style"),D=b.extend({},v,z,A,y,B),E=f("background,cite,href,longdesc,src,usemap,xlink:href"),F=f("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),G=f("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),H=b.extend({},E,G,F),I=document.createElement("pre");b.module("ngSanitize",[]).provider("$sanitize",d),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,d=/^mailto:/i;return function(f,g){function h(a){a&&n.push(e(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&n.push('target="',g,'" '),n.push('href="',a.replace(/"/g,"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]||j[4]||(k=(j[3]?"http://":"mailto:")+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(d,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular);var Showdown={extensions:{}},forEach=Showdown.forEach=function(a,b){if("function"==typeof a.forEach)a.forEach(b);else{var c,d=a.length;for(c=0;d>c;c++)b(a[c],c,a)}},stdExtName=function(a){return a.replace(/[_-]||\s/g,"").toLowerCase()};Showdown.converter=function(a){var b,c,d,e=0,f=[],g=[];if("undefined"!=typeof module&&"undefined"!=typeof exports&&"undefined"!=typeof require){var h=require("fs");if(h){var i=h.readdirSync((__dirname||".")+"/extensions").filter(function(a){return~a.indexOf(".js")}).map(function(a){return a.replace(/\.js$/,"")});Showdown.forEach(i,function(a){var b=stdExtName(a);Showdown.extensions[b]=require("./extensions/"+a)})}}if(this.makeHtml=function(a){return b={},c={},d=[],a=a.replace(/~/g,"~T"),a=a.replace(/\$/g,"~D"),a=a.replace(/\r\n/g,"\n"),a=a.replace(/\r/g,"\n"),a="\n\n"+a+"\n\n",a=M(a),a=a.replace(/^[ \t]+$/gm,""),Showdown.forEach(f,function(b){a=l(b,a)}),a=z(a),a=n(a),a=m(a),a=p(a),a=K(a),a=a.replace(/~D/g,"$$"),a=a.replace(/~T/g,"~"),Showdown.forEach(g,function(b){a=l(b,a)}),a},a&&a.extensions){var j=this;Showdown.forEach(a.extensions,function(a){if("string"==typeof a&&(a=Showdown.extensions[stdExtName(a)]),"function"!=typeof a)throw"Extension '"+a+"' could not be loaded.  It was either not found or is not a valid extension.";Showdown.forEach(a(j),function(a){a.type?"language"===a.type||"lang"===a.type?f.push(a):("output"===a.type||"html"===a.type)&&g.push(a):g.push(a)})})}var k,l=function(a,b){if(a.regex){var c=new RegExp(a.regex,"g");return b.replace(c,a.replace)}return a.filter?a.filter(b):void 0},m=function(a){return a+="~0",a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|(?=~0))/gm,function(a,d,e,f,g){return d=d.toLowerCase(),b[d]=G(e),f?f+g:(g&&(c[d]=g.replace(/"/g,"&quot;")),"")}),a=a.replace(/~0/,"")},n=function(a){return a=a.replace(/\n/g,"\n\n"),a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,o),a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,o),a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,o),a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,o),a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,o),a=a.replace(/\n\n/g,"\n")},o=function(a,b){var c=b;return c=c.replace(/\n\n/g,"\n"),c=c.replace(/^\n/,""),c=c.replace(/\n+$/g,""),c="\n\n~K"+(d.push(c)-1)+"K\n\n"},p=function(a){a=w(a);var b=A("<hr />");return a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,b),a=x(a),a=y(a),a=E(a),a=n(a),a=F(a)},q=function(a){return a=B(a),a=r(a),a=H(a),a=u(a),a=s(a),a=I(a),a=G(a),a=D(a),a=a.replace(/  +\n/g," <br />\n")},r=function(a){var b=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return a=a.replace(b,function(a){var b=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return b=N(b,"\\`*_")})},s=function(a){return a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,t),a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,t),a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,t)},t=function(a,d,e,f,g,h,i,j){void 0==j&&(j="");var k=d,l=e,m=f.toLowerCase(),n=g,o=j;if(""==n)if(""==m&&(m=l.toLowerCase().replace(/ ?\n/g," ")),n="#"+m,void 0!=b[m])n=b[m],void 0!=c[m]&&(o=c[m]);else{if(!(k.search(/\(\s*\)$/m)>-1))return k;n=""}n=N(n,"*_");var p='<a href="'+n+'"';return""!=o&&(o=o.replace(/"/g,"&quot;"),o=N(o,"*_"),p+=' title="'+o+'"'),p+=">"+l+"</a>"},u=function(a){return a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,v),a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,v)},v=function(a,d,e,f,g,h,i,j){var k=d,l=e,m=f.toLowerCase(),n=g,o=j;if(o||(o=""),""==n){if(""==m&&(m=l.toLowerCase().replace(/ ?\n/g," ")),n="#"+m,void 0==b[m])return k;n=b[m],void 0!=c[m]&&(o=c[m])}l=l.replace(/"/g,"&quot;"),n=N(n,"*_");var p='<img src="'+n+'" alt="'+l+'"';return o=o.replace(/"/g,"&quot;"),o=N(o,"*_"),p+=' title="'+o+'"',p+=" />"},w=function(a){function b(a){return a.replace(/[^\w]/g,"").toLowerCase()}return a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,c){return A('<h1 id="'+b(c)+'">'+q(c)+"</h1>")}),a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,c){return A('<h2 id="'+b(c)+'">'+q(c)+"</h2>")}),a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,c,d){var e=c.length;return A("<h"+e+' id="'+b(d)+'">'+q(d)+"</h"+e+">")})},x=function(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return e?a=a.replace(b,function(a,b,c){var d=b,e=c.search(/[*+-]/g)>-1?"ul":"ol";d=d.replace(/\n{2,}/g,"\n\n\n");var f=k(d);return f=f.replace(/\s+$/,""),f="<"+e+">"+f+"</"+e+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){var e=b,f=c,g=d.search(/[*+-]/g)>-1?"ul":"ol",f=f.replace(/\n{2,}/g,"\n\n\n"),h=k(f);return h=e+"<"+g+">\n"+h+"</"+g+">\n"})),a=a.replace(/~0/,"")};k=function(a){return e++,a=a.replace(/\n{2,}$/,"\n"),a+="~0",a=a.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(a,b,c,d,e){var f=e,g=b;return g||f.search(/\n{2,}/)>-1?f=p(L(f)):(f=x(L(f)),f=f.replace(/\n$/,""),f=q(f)),"<li>"+f+"</li>\n"}),a=a.replace(/~0/g,""),e--,a};var y=function(a){return a+="~0",a=a.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){var d=b,e=c;return d=C(L(d)),d=M(d),d=d.replace(/^\n+/g,""),d=d.replace(/\n+$/g,""),d="<pre><code>"+d+"\n</code></pre>",A(d)+e}),a=a.replace(/~0/,"")},z=function(a){return a+="~0",a=a.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(a,b,c){var d=b,e=c;return e=C(e),e=M(e),e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,""),e="<pre><code"+(d?' class="'+d+'"':"")+">"+e+"\n</code></pre>",A(e)}),a=a.replace(/~0/,"")},A=function(a){return a=a.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(d.push(a)-1)+"K\n\n"},B=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d,e){var f=d;return f=f.replace(/^([ \t]*)/g,""),f=f.replace(/[ \t]*$/g,""),f=C(f),b+"<code>"+f+"</code>"})},C=function(a){return a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=N(a,"*_{}[]\\",!1)},D=function(a){return a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},E=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c=b;return c=c.replace(/^[ \t]*>[ \t]?/gm,"~0"),c=c.replace(/~0/g,""),c=c.replace(/^[ \t]+$/gm,""),c=p(c),c=c.replace(/(^|\n)/g,"$1  "),c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c=b;return c=c.replace(/^  /gm,"~0"),c=c.replace(/~0/g,"")}),A("<blockquote>\n"+c+"\n</blockquote>")})},F=function(a){a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,"");for(var b=a.split(/\n{2,}/g),c=[],e=b.length,f=0;e>f;f++){var g=b[f];g.search(/~K(\d+)K/g)>=0?c.push(g):g.search(/\S/)>=0&&(g=q(g),g=g.replace(/^([ \t]*)/g,"<p>"),g+="</p>",c.push(g))}e=c.length;for(var f=0;e>f;f++)for(;c[f].search(/~K(\d+)K/)>=0;){var h=d[RegExp.$1];h=h.replace(/\$/g,"$$$$"),c[f]=c[f].replace(/~K\d+K/,h)}return c.join("\n\n")},G=function(a){return a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},H=function(a){return a=a.replace(/\\(\\)/g,O),a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,O)},I=function(a){return a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return J(K(b))})},J=function(a){var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){return"&#x"+a.charCodeAt(0).toString(16)+";"},function(a){return a}];return a="mailto:"+a,a=a.replace(/./g,function(a){if("@"==a)a=b[Math.floor(2*Math.random())](a);else if(":"!=a){var c=Math.random();a=c>.9?b[2](a):c>.45?b[1](a):b[0](a)}return a}),a='<a href="'+a+'">'+a+"</a>",a=a.replace(/">.+:/g,'">')},K=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})},L=function(a){return a=a.replace(/^(\t|[ ]{1,4})/gm,"~0"),a=a.replace(/~0/g,"")},M=function(a){return a=a.replace(/\t(?=\t)/g,"    "),a=a.replace(/\t/g,"~A~B"),a=a.replace(/~B(.+?)~A/g,function(a,b,c){for(var d=b,e=4-d.length%4,f=0;e>f;f++)d+=" ";return d}),a=a.replace(/~A/g,"    "),a=a.replace(/~B/g,"")},N=function(a,b,c){var d="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(d="\\\\"+d);var e=new RegExp(d,"g");return a=a.replace(e,O)},O=function(a,b){var c=b.charCodeAt(0);return"~E"+c+"E"}},"undefined"!=typeof module&&(module.exports=Showdown),"function"==typeof define&&define.amd&&define("showdown",function(){return Showdown});var Common;!function(a){var b=function(){function a(a){this.value=a,this.value=a||null}return Object.defineProperty(a.prototype,"isEmpty",{get:function(){return null===this.value},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isPresent",{get:function(){return!this.isEmpty},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"get",{get:function(){if(this.isEmpty)throw new Error("The Optional<T> does not contain any value.");return this.value},enumerable:!0,configurable:!0}),a}();a.Optional=b,function(a){a[a.ASC=0]="ASC",a[a.DESC=1]="DESC",a[a.RANDOM=2]="RANDOM"}(a.SortOrder||(a.SortOrder={})),a.SortOrder}(Common||(Common={}));var Blog;!function(a){var b;!function(a){var b=function(){function a(){}return a.prototype.transform=function(b){var c=a.matchMeta.exec(b);return null===c?b:b.replace("</article>",'<stab-github-comments-container issue-url="'+c[1]+'"></stab-github-comments-container></article>')},a.matchMeta=/<meta\s+?name="stab-github-comments-issue-url"\s+?content="([^"]+)"\s*?\/?>/i,a}();a.StabGithubCommentsArticleTransformer=b}(b=a.Article||(a.Article={}))}(Blog||(Blog={}));var Blog;!function(a){var b;!function(a){var b;!function(a){function b(){var a=document.createElement("style");a.setAttribute("type","text/css"),a.setAttribute("id","stab-comments-github-styles"),a.innerHTML=c,document.querySelector("head").appendChild(a)}var c="div#stab-github-comments-container div.jumbotron{margin-top:2em}div#stab-github-comments-container>hr:first-child+h3{margin:1.5em 0}div#stab-github-comments-container hr#poster-and-comments-separator{margin:1.5em 0}div#stab-github-comments-container>div>div.comment.media{margin-top:2.5em;border-radius:4px}div#stab-github-comments-container>div>div.comment.media:first-of-type{margin-top:0}div#stab-github-comments-container>div>div.comment.media:last-of-type{margin-bottom:2.5em}div#stab-github-comments-container>div>div.comment div.media-left{background-color:#f8f8f8;padding:.5ex .5ex 0}div#stab-github-comments-container>div>div.comment div.media-left img{max-width:50px;max-height:50px}div#stab-github-comments-container>div>div.comment div.media-body{padding:0 1ex 1ex;background-color:#f2f2f2}div#stab-github-comments-container>div>div.comment div.media-body h4{display:inline-block;margin:.5ex auto 0}div#stab-github-comments-container>div>div.comment div.media-body h4>small{font-size:75%;font-style:italic;display:block;margin-top:1ex}div#stab-github-comments-container>div>div.comment div.media-body span.label{display:inline-block;vertical-align:top;margin-right:.5ex}div#stab-github-comments-container>div>div.comment div.media-body span.label span.glyphicon{font-size:90%}div#stab-github-comments-container>div>div.comment div.media-body span.label[ng-click]{cursor:pointer}div#stab-github-comments-container>div>div.comment div.media-body span.label[disabled],div#stab-github-comments-container>div>div.comment div.media-body span.label.disabled{opacity:.5;cursor:not-allowed}div#stab-github-comments-container>div>div.comment div.media-body hr{border-top-color:#fff;margin:.5em 0 .5em}div#stab-github-comments-container>div>div.comment div.media-body p{margin:0}div#stab-github-comments-container>div>div.comment div.edit-comment-inplace textarea{display:block;width:100%;height:8em;font-size:75%;margin:0;padding:.5ex}div#create-post hr{border-top-color:#fff;margin:.5em 0 .5em}div#create-post>div:first-child{padding:1ex;background-color:#f4f4f4;border-radius:4px}div#create-post>div:first-child>div:first-child{background-color:#eee}div#create-post>div:first-child>div:first-child>h4{background-size:contain;height:60px;padding-left:65px;line-height:60px;background-repeat:no-repeat;display:inline-block;margin:0}div#create-post>div:first-child>div:first-child+div{padding:1ex 0}div#create-post>div:first-child>div:first-child+div>textarea{display:block;width:100%;height:8em;font-size:75%;margin:0;padding:.5ex}div.btn-group button.btn:disabled{cursor:not-allowed;color:#333}",d=function(){function a(){}return a.prototype.createModule=function(){return""!==c&&b(),angular.module("blogapp.article.stab-gh-comments",["ngSanitize","btford.markdown"]).constant("CONFIG_COMMENTS",(new Common.Constants).add("OAUTH_CLIENT_ID","ddd88d5a03c3e91978f3").add("OAUTH_SCOPES",["user","public_repo"]).add("OAUTH_HTML_CALLBACK_FILE","auth.callback.html").add("OAUTH_AUTHORIZATION_APP_URL","https://stab-gh-comments-authorizer.herokuapp.com/").add("OAUTH_LOCAL_STORAGE_TOKEN_KEY","STAB_GITHUB_COMMENTS_OAUTH_ACCESS_TOKEN")).config(["$anchorScrollProvider",function(a){a.disableAutoScrolling()}])},a}();a.stabGithubComments=(new d).createModule()}(b=a.Comments||(a.Comments={}))}(b=a.Article||(a.Article={}))}(Blog||(Blog={}));var Blog;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.$http=a,this.$q=b,this.CONFIG=c,this.localStorageInterval=null,this.userAuthorizedDeferred=b.defer()}return Object.defineProperty(a.prototype,"userAuthorizedPromise",{get:function(){return this.userAuthorizedDeferred.promise},enumerable:!0,configurable:!0}),Object.defineProperty(a,"isLocalStorageAvailable",{get:function(){var a="test";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(b){}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"accessToken",{get:function(){return new Common.Optional(localStorage.getItem(this.CONFIG.get("OAUTH_LOCAL_STORAGE_TOKEN_KEY")))},enumerable:!0,configurable:!0}),a.prototype.resetAccessToken=function(){localStorage.removeItem(this.CONFIG.get("OAUTH_LOCAL_STORAGE_TOKEN_KEY"))},Object.defineProperty(a.prototype,"isUserAuthorized",{get:function(){var b=this,c=this.accessToken;if(!a.isLocalStorageAvailable||c.isEmpty)return this.$q.when(!1);var d=this.CONFIG.get("OAUTH_SCOPES").join(",");return this.$http.get(this.CONFIG.get("OAUTH_AUTHORIZATION_APP_URL")+"check/"+c.get+"/"+d).then(function(a){return b.userAuthorizedDeferred.resolve(),!0})["catch"](function(a){return b.resetAccessToken(),!1})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"accessTokenUsingExistingAuthorizationOrAuthorize",{get:function(){var a=this;return this.isUserAuthorized.then(function(b){return b?a.accessToken:a.authorize().then(function(b){return b?(a.userAuthorizedDeferred.resolve(),a.accessToken):new Common.Optional})})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"state",{get:function(){var a=this.CONFIG.get("OAUTH_AUTHORIZATION_APP_URL");return this.$http.get(a+"state").then(function(a){return a.data})},enumerable:!0,configurable:!0}),a.prototype.authorize=function(){var b=this;return a.isLocalStorageAvailable?this.state.then(function(a){var c=b.CONFIG.get("OAUTH_CLIENT_ID"),d=b.CONFIG.get("OAUTH_SCOPES").join(","),e=b.authCallbackAbsolutePath,f=encodeURIComponent(b.CONFIG.get("OAUTH_AUTHORIZATION_APP_URL")+"authorize/?blog_url="+e),g=window.open("https://github.com/login/oauth/authorize?client_id="+c+"&state="+a+"&scope="+d+"&redirect_uri="+f,"_blank");return b.pollLocalStorage().then(function(a){return b.isUserAuthorized})["finally"](function(){g.close()})})["catch"](function(){return!1}):this.$q.when(!1)},a.prototype.pollLocalStorage=function(b){var c=this;if(void 0===b&&(b=50),!a.isLocalStorageAvailable)return this.$q.when(null);if(null!==this.localStorageInterval)throw new Error("You may only call this function once.");var d=this.$q.defer();return this.localStorageInterval=setInterval(function(){var a=c.accessToken;a.isPresent&&(clearInterval(c.localStorageInterval),c.localStorageInterval=null,d.resolve(a.get))},b),d.promise},Object.defineProperty(a.prototype,"authCallbackAbsolutePath",{get:function(){var a=this.CONFIG.get("OAUTH_HTML_CALLBACK_FILE"),b=Array.prototype.slice.call(document.querySelectorAll("script"),0).filter(function(a){return a.getAttribute("src").indexOf("stab.comments.github")>=0})[0].getAttribute("src");return b=b.substring(0,b.lastIndexOf("/"))+"/",location.protocol+"//"+location.host+(0===b.indexOf("/")?b:location.pathname+b)+a},enumerable:!0,configurable:!0}),a.inlineAnnotatedConstructor=["$http","$q","CONFIG_COMMENTS",a],a}();a.StabGithubCommentsAuthorizationService=b,angular.module("blogapp.article.stab-gh-comments").service("StabGithubCommentsAuthorizationService",b.inlineAnnotatedConstructor)}(b=a.Comments||(a.Comments={}))}(b=a.Article||(a.Article={}))}(Blog||(Blog={}));var Blog;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d){this.$http=a,this.$q=b,this.$cacheFactoryService=c,this.authService=d,this.userCache=c("users")}return Object.defineProperty(a.prototype,"authenticatedUser",{get:function(){var a=this;return this.authService.userAuthorizedPromise.then(function(){return a.authService.accessTokenUsingExistingAuthorizationOrAuthorize.then(function(b){if(!b.isPresent)return new Common.Optional;var c=a.userCache.get("__authenticated_user__");return void 0===c?a.$http.get("https://api.github.com/user",{headers:{Authorization:"token "+b.get}}).then(function(b){var c=b.data;return a.userCache.put(c.id.toString(),c),a.userCache.put("__authenticated_user__",c),new Common.Optional(c)})["catch"](function(){return new Common.Optional}):a.$q.when(new Common.Optional(c))})})},enumerable:!0,configurable:!0}),a.inlineAnnotatedConstructor=["$http","$q","$cacheFactory","StabGithubCommentsAuthorizationService",a],a}();a.StabGithubCommentsUserService=b,angular.module("blogapp.article.stab-gh-comments").service("StabGithubCommentsUserService",b.inlineAnnotatedConstructor)}(b=a.Comments||(a.Comments={}))}(b=a.Article||(a.Article={}))}(Blog||(Blog={}));var Blog;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e){this.$http=a,this.$q=b,this.$cacheFactoryService=c,this.authService=d,this.userService=e,this.issueComments_sortBy="created",this.issueCache=c("issues")}return a.prototype.issueByUrl=function(b){var c=this;b=a.normalizeIssueUrl(b);var d=a.toApiIssueUrl(b),e=this.issueCache.get(b);return e?this.$q.when(new Common.Optional(e)):this.$http.get(d).then(function(a){var d=a.data;return d.isOpen="open"===d.state,d.comments=[],c.issueCache.put(b,d),new Common.Optional(d)})["catch"](function(){return new Common.Optional})},a.prototype.commentsForIssueByUrl=function(b,c,d,e){var f=this;void 0===c&&(c="created"),void 0===d&&(d=Common.SortOrder.DESC),void 0===e&&(e=new Date(0)),this.issueComments_sortBy="created"===c?c:"updated",b=a.normalizeIssueUrl(b);var g=a.toApiIssueUrl(b),h=this.issueByUrl(b),i=this.$http.get(g+"/comments",{params:{sort:"created"===c?c:"updated",direction:d===Common.SortOrder.ASC?"asc":"desc",since:e.toISOString()}}).then(function(a){return new Common.Optional(a.data)})["catch"](function(){return new Common.Optional});return this.$q.all([h,i]).then(function(b){var e=b[0],g=b[1];if(e.isEmpty||g.isEmpty)return new Common.Optional;var h=g.get.map(function(b){return a.processComment(b,e.get)}).sort(function(a,b){return Date.parse(a["created"===c?"created_at":"updated_at"])>Date.parse(b["created"===c?"created_at":"updated_at"])?d===Common.SortOrder.ASC?1:-1:d===Common.SortOrder.ASC?-1:1});return f.setCommentDeletableFlag(h),e.get.comments=h,new Common.Optional(h)})},a.prototype.patchComment=function(a,b){var c=this;return this.createOrPatchComment(a,b.body,b).then(function(b){return c.issueByUrl(a).then(function(a){var c=a.get.comments.map(function(a,b){return{comment:a,idx:b}}).filter(function(a){return a.comment.id===b.get.id})[0].idx;return a.get.comments[c]=b.get,b})})},a.prototype.createComment=function(a,b){var c=this;return this.createOrPatchComment(a,b).then(function(b){return c.issueByUrl(a).then(function(a){if(0===a.get.comments.length)a.get.comments.push(b.get);else{var d="created"===c.issueComments_sortBy?"created_at":"updated_at",e=a.get.comments[0][d].getTime(),f=a.get.comments[a.get.comments.length-1][d].getTime(),g=e-f>=0;g?a.get.comments.unshift(b.get):a.get.comments.push(b.get)}return b})})},a.prototype.createOrPatchComment=function(b,c,d){var e=this;return b=a.normalizeIssueUrl(b),this.authService.accessTokenUsingExistingAuthorizationOrAuthorize.then(function(f){if(!f.isPresent)return e.$q.when(new Common.Optional);var g=!!d&&angular.isNumber(d.id),h=g?e.$http.patch:e.$http.post,i=a.toApiIssueUrl(g?b.substring(0,b.lastIndexOf("/")):b);return h(i+"/comments"+(g?"/"+d.id:""),{body:c},{headers:{Authorization:"token "+f.get}}).then(function(c){return e.issueByUrl(b).then(function(b){if(!b.isPresent)throw new Error("The issue is not present.");var d=a.processComment(c.data,b.get);return e.setCommentDeletableFlag([d]),new Common.Optional(d)})})["catch"](function(){return e.$q.when(new Common.Optional)})})},a.prototype.deleteComment=function(b,c){var d=this;b=a.normalizeIssueUrl(b);var e=this.issueByUrl(b);b=b.substring(0,b.lastIndexOf("/"));var f=a.toApiIssueUrl(b);return this.authService.accessTokenUsingExistingAuthorizationOrAuthorize.then(function(a){return a.isPresent?d.$http["delete"](f+"/comments/"+c.id,{headers:{Authorization:"token "+a.get}}).then(function(){return e.then(function(a){return a.get.comments=a.get.comments.filter(function(a){return a.id!==c.id}),!0})})["catch"](function(){return!1}):!1})},a.prototype.setCommentDeletableFlag=function(a){var b=this;return this.authService.userAuthorizedPromise.then(function(){return b.userService.authenticatedUser.then(function(b){var c=b.get;return a.forEach(function(a){return a.isDeletable=a.user.id===c.id}),a})})},a.normalizeIssueUrl=function(a){return(a+"").replace(/(?:https:\/\/github.com)?(?:\/)?([^\/]+?\/[^\/]+?\/issues\/[^\/]+?)/i,"$1")},a.toApiIssueUrl=function(a){return"https://api.github.com/repos/"+a},a.processComment=function(a,b){var c=a.created_at!==a.updated_at;return a.commenter=a.user,a.created_at=new Date(Date.parse(a.created_at.toString())),a.updated_at=c?new Date(Date.parse(a.updated_at.toString())):null,a.isIssueOwner=a.user.id===b.user.id,a.isDeletable=!1,a},a.inlineAnnotatedConstructor=["$http","$q","$cacheFactory","StabGithubCommentsAuthorizationService","StabGithubCommentsUserService",a],a}();a.StabGithubCommentsService=b,angular.module("blogapp.article.stab-gh-comments").service("StabGithubCommentsService",b.inlineAnnotatedConstructor)}(b=a.Comments||(a.Comments={}))}(b=a.Article||(a.Article={}))}(Blog||(Blog={}));var Blog;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e){var f=this;this.$scope=a,this.$q=b,this.commentService=c,this.authService=d,this.userService=e,this.isAuthorized=!1,this.isWaitingForAuthorization=!1,this.authenticatedUser=null,this._isBusy=!1,this._issueUrl=a.issueUrl,this._isBusy=!0;var g=c.issueByUrl(this.issueUrl).then(function(a){c.commentsForIssueByUrl(f.issueUrl).then(function(b){f._issue=a.get})}),h=d.isUserAuthorized.then(function(a){return f.isAuthorized=a})["finally"](function(){return f.isWaitingForAuthorization=!1});e.authenticatedUser.then(function(a){a.isPresent&&(f.authenticatedUser=a.get)}),this._isBusy=!0,b.all([g,h])["finally"](function(){f._isBusy=!1})}return Object.defineProperty(a.prototype,"isBusy",{get:function(){return this._isBusy||this.isWaitingForAuthorization},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"issueUrl",{get:function(){return this._issueUrl},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"issue",{get:function(){return this._issue},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"comments",{get:function(){return this.issue?this.issue.comments:[]},enumerable:!0,configurable:!0}),a.prototype.tryAuthorize=function(){var a=this;return this.isWaitingForAuthorization=!0,this.authService.accessTokenUsingExistingAuthorizationOrAuthorize.then(function(b){a.isAuthorized=b.isPresent})["finally"](function(){a.isWaitingForAuthorization=!1})},a.prototype.deleteComment=function(a){var b=this;return confirm("Do you really want to delete your comment?")?(this._isBusy=!0,this.commentService.deleteComment(this.issueUrl,a)["finally"](function(){return b._isBusy=!1})):this.$q.when()},a.prototype.patchComment=function(a){var b=this;return this._isBusy=!0,this.commentService.patchComment(this.issueUrl,a)["finally"](function(){return b._isBusy=!1})},a.inlineAnnotatedConstructor=["$scope","$q","StabGithubCommentsService","StabGithubCommentsAuthorizationService","StabGithubCommentsUserService",a],a}();a.StabGithubCommentsContainerDirectiveController=b,angular.module("blogapp.article.stab-gh-comments").controller("StabGithubCommentsContainerDirectiveController",b.inlineAnnotatedConstructor)}(b=a.Comments||(a.Comments={}))}(b=a.Article||(a.Article={}));
}(Blog||(Blog={}));var Blog;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f){this.$scope=a,this.$q=b,this.$anchorScroll=c,this.authService=d,this.commentService=e,this.userService=f,this._isBusy=!1}return Object.defineProperty(a.prototype,"isBusy",{get:function(){return this._isBusy||this.$scope.commentVm.isBusy},enumerable:!0,configurable:!0}),a.prototype.postComment=function(a){var b=this;return a&&""!==(a+"").trim()?(this._isBusy=!0,this.commentService.createComment(this.$scope.commentVm.issueUrl,a).then(function(a){var c=b.$q.defer(),d="stab-github-comment-"+a.get.id,e=window.setInterval(function(){document.querySelector("#"+d)&&(b.$scope.post.commentBody="",b.$anchorScroll(d),clearInterval(e),c.resolve())},25);return c.promise})["finally"](function(){return b._isBusy=!1})):(alert("Your comment must not be empty."),this.$q.when())},a.inlineAnnotatedConstructor=["$scope","$q","$anchorScroll","StabGithubCommentsAuthorizationService","StabGithubCommentsService","StabGithubCommentsUserService",a],a}();a.StabGithubCommentsCreatePostDirectiveController=b,angular.module("blogapp.article.stab-gh-comments").controller("StabGithubCommentsCreatePostDirectiveController",b.inlineAnnotatedConstructor)}(b=a.Comments||(a.Comments={}))}(b=a.Article||(a.Article={}))}(Blog||(Blog={}));var Blog;!function(a){var b;!function(a){var b;!function(a){a.StabGithubCommentsCreatePostDirective=function(){return{replace:!0,restrict:"E",controllerAs:"createPostVm",controller:"StabGithubCommentsCreatePostDirectiveController",template:function(a,b,c){var d='<div id="create-post"><div><div><h4 ng-if="commentVm.isAuthorized" style="background-image:url({{ commentVm.authenticatedUser.avatar_url }});">{{ commentVm.authenticatedUser.login }}</h4> <small ng-if="!commentVm.isAuthorized">You need to sign in to Github and authorize this app for commenting.</small></div><div><textarea ng-model="post.commentBody" ng-init="post.commentBody=\'\';" ng-show="!commentVm.isAuthorized || post.createPostMode==\'write\' || post.createPostMode==\'both\';" ng-disabled="!commentVm.isAuthorized || createPostVm.isBusy" placeholder="Your comment goes here. Markdown is enabled. Be nice :)"></textarea><div ng-show="post.createPostMode == \'preview\' || post.createPostMode == \'both\';"><h6 ng-show="post.createPostMode == \'both\';">Preview:</h6><div btf-markdown="post.commentBody"></div></div></div><hr/><div class="pull-right"><div ng-if="commentVm.isAuthorized" class="btn-group dropup" ng-model="post.showCreatePostMode" ng-init="post.showCreatePostMode = false" ng-class="{\'open\' : post.showCreatePostMode }"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" ng-click="post.showCreatePostMode = !post.showCreatePostMode" ng-disabled="createPostVm.isBusy">Mode: <i>{{ post.createPostMode }}</i>&nbsp;<span class="caret"></span></button><ul class="dropdown-menu" ng-model="post.createPostMode" ng-init="post.createPostMode=\'write\'"><li ng-click="post.showCreatePostMode = false; post.createPostMode = \'write\';" ng-class="{\'active\': post.createPostMode == \'write\'}"><a href>Write</a></li><li ng-click="post.showCreatePostMode = false; post.createPostMode = \'preview\';" ng-class="{\'active\': post.createPostMode == \'preview\'}"><a href>Preview</a></li><li ng-click="post.showCreatePostMode = false; post.createPostMode = \'both\';" ng-class="{\'active\': post.createPostMode == \'both\'}"><a href>Both</a></li></ul></div> <button ng-if="commentVm.isAuthorized" type="button" class="btn" ng-click="createPostVm.postComment(post.commentBody);" ng-disabled="createPostVm.isBusy">Post comment</button> <span ng-if="commentVm.isWaitingForAuthorization">Waiting for authorization..</span> <button ng-if="!commentVm.isAuthorized" ng-disabled="commentVm.isWaitingForAuthorization || createPostVm.isBusy" type="button" class="btn btn-primary" ng-click="commentVm.tryAuthorize();"> Authorize&nbsp;<span class="glyphicon glyphicon-log-in"></span></button></div><div class="clearfix"></div></div></div>';return d}}},a.StabGithubCommentsCreatePostDirective.$inject=[],angular.module("blogapp.article.stab-gh-comments").directive("stabGithubCommentsCreatePost",a.StabGithubCommentsCreatePostDirective)}(b=a.Comments||(a.Comments={}))}(b=a.Article||(a.Article={}))}(Blog||(Blog={}));var Blog;!function(a){var b;!function(a){var b;!function(a){a.StabGithubCommentsContainerDirective=function(){return{replace:!0,restrict:"E",scope:{issueUrl:"@"},controllerAs:"commentVm",controller:"StabGithubCommentsContainerDirectiveController",template:function(a,b,c){var d='<div id="stab-github-comments-container"><hr/><h3>Comments <span ng-if="commentVm.comments.length>0"> ({{ commentVm.comments.length }}):</span></h3><stab-github-comments-create-post></stab-github-comments-create-post><div ng-if="commentVm.comments.length> 0"><hr id="poster-and-comments-separator"/><div class="comment media" ng-repeat="comment in commentVm.comments track by comment.id" ng-class="{ \'my-comment\': comment.isIssueOwner }" ng-attr-id="{{ \'stab-github-comment-\' + comment.id }}"><div class="media-left"> <img ng-attr-src="{{ comment.user.avatar_url }}"/></div><div class="media-body"><h4> <a href="https://github.com/{{ comment.user.login }}" target="_blank">{{ comment.user.login }}</a> <span ng-if="comment.isIssueOwner" class="label label-info">Owner</span> <span ng-if="comment.isDeletable" ng-show="!comment.isEditing;" ng-model="comment.bodyOrg" ng-click="comment.bodyOrg = comment.body; comment.isEditing = true;" class="label label-warning" ng-disabled="commentVm.isBusy">Edit&nbsp;<span class="glyphicon glyphicon-edit"></span></span> <span ng-if="comment.isDeletable" ng-show="!comment.isEditing;" ng-click="commentVm.deleteComment(comment);" class="label label-danger" ng-disabled="commentVm.isBusy">Delete&nbsp;<span class="glyphicon glyphicon-remove"></span></span> <small>wrote on {{ comment.created_at.toLocaleDateString() }} @ {{ comment.created_at.toLocaleTimeString() }} <span ng-if="comment.updated_at">and updated on {{ comment.updated_at.toLocaleDateString() }} @ {{ comment.updated_at.toLocaleTimeString() }}</span></small></h4><hr/><p ng-show="!comment.isEditing" btf-markdown="comment.body"></p><div ng-show="comment.isEditing" class="edit-comment-inplace"><div><textarea ng-model="comment.body" ng-show="post.edit.createPostMode == \'write\' || post.edit.createPostMode == \'both\';" placeholder="Your comment goes here. Markdown is enabled. Be nice :)" ng-disabled="commentVm.isBusy"></textarea><div ng-show="post.edit.createPostMode == \'preview\' || post.edit.createPostMode == \'both\';"><h6 ng-show="post.edit.createPostMode == \'both\';">Preview:</h6><div btf-markdown="comment.body"></div></div></div><hr/><div class="pull-right"><div class="btn-group dropup" ng-model="post.edit.showCreatePostMode" ng-init="post.edit.showCreatePostMode = false" ng-class="{\'open\' : post.edit.showCreatePostMode }"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" ng-click="post.edit.showCreatePostMode = !post.edit.showCreatePostMode" ng-disabled="commentVm.isBusy"> Mode: <i>{{ post.edit.createPostMode }}</i>&nbsp;<span class="caret"></span></button><ul class="dropdown-menu" ng-model="post.edit.createPostMode" ng-init="post.edit.createPostMode=\'write\'"><li ng-click="post.edit.showCreatePostMode = false; post.edit.createPostMode = \'write\';" ng-class="{\'active\': post.edit.createPostMode == \'write\'}"><a href>Write</a></li><li ng-click="post.edit.showCreatePostMode = false; post.edit.createPostMode = \'preview\';" ng-class="{\'active\': post.edit.createPostMode == \'preview\'}"><a href>Preview</a></li><li ng-click="post.edit.showCreatePostMode = false; post.edit.createPostMode = \'both\';" ng-class="{\'active\': post.edit.createPostMode == \'both\'}"><a href>Both</a></li></ul></div> <button ng-if="commentVm.isAuthorized" type="button" class="btn" ng-click="comment.isEditing = false; comment.body = comment.bodyOrg;" ng-disabled="commentVm.isBusy">Discard changes</button> <button ng-if="commentVm.isAuthorized" type="button" class="btn btn-primary" ng-click="commentVm.patchComment(comment);" ng-disabled="commentVm.isBusy">Update comment</button></button></div></div></div></div></div><div ng-if="!commentVm.comments.length" class="jumbotron text-center"><h4>Currently, no comments exist. Be the first to write one!</h4></div></div>';return d}}},a.StabGithubCommentsContainerDirective.$inject=[],angular.module("blogapp.article.stab-gh-comments").directive("stabGithubCommentsContainer",a.StabGithubCommentsContainerDirective)}(b=a.Comments||(a.Comments={}))}(b=a.Article||(a.Article={}))}(Blog||(Blog={}));