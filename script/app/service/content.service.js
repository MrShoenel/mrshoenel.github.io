var Blog;!function(a){var b;!function(b){var c=function(){function b(a,b,c,d){this.$http=a,this.$q=b,this.$cacheFactoryService=c,this.$sce=d,this.contentJson=null,this.metaCache=c("contentMeta"),this.cache=c("content"),this.fragmentCache=c("fragments")}return b.prototype.initializeMetaContent=function(){var a=this;return null!==this.contentJson?this.$q.when(angular.extend({},this.contentJson)):this.$http.get("content/content.json").then(function(b){a.contentJson=b.data;for(var c=0;c<b.data.metaArticles.length;c++)a.metaCache.put(b.data.metaArticles[c].urlName,b.data.metaArticles[c]);return b.data})},b.prototype.loadMyDeps=function(a){return this.initializeMetaContent().then(function(b){return a.load(b.mydeps.map(function(a){return a.path}))})},b.prototype.articleByUrlName=function(a){var c=this,d=this.cache.get(a);return void 0===d?this.getMetaArticles().then(function(d){return c.$http.get(c.metaCache.get(a).path).then(function(d){var e=new Common.Article(c.metaCache.get(a),d.data,c.$sce);return b.preprocessArticle(e),c.cache.put(a,e),e})}):this.$q.when(d)},b.prototype.getMetaArticles=function(a){var b=this,c=a instanceof Common.I2Tuple?function(b){return b.hasOwnProperty(a.t1)&&b[a.t1]===a.t2}:a instanceof Function?a:function(a){return!0},d=Date.prototype.toGMTString||Date.prototype.toLocaleString||Date.prototype.toString;return this.initializeMetaContent().then(function(){return b.contentJson.metaArticles.slice(0).filter(c).map(function(a){return a.lastMod=d.call(new Date(Date.parse(a.lastMod))),a})})},Object.defineProperty(b.prototype,"fragments",{get:function(){var a=this;return this.initializeMetaContent().then(function(b){return a.$q.all(b.metaFragments.map(function(b){return a.getFragmentByID(b.id)}))})},enumerable:!0,configurable:!0}),b.prototype.getFragmentByID=function(a){var b=this;return this.initializeMetaContent().then(function(c){var d=c.metaFragments.filter(function(b){return b.id===a})[0],e=b.fragmentCache.get(d.id);return void 0!==e?b.$q.when(e):angular.isString(d.path)&&0!==d.path.length?b.$http.get(d.path).then(function(a){return e=new Common.Fragment(d,(a.data+"").toString(),b.$sce),b.fragmentCache.put(d.id,e),e}):(e=new Common.Fragment(d,(d.content||"").toString(),b.$sce),b.fragmentCache.put(d.id,e),b.$q.when(e))})},b.preprocessArticle=function(b){var c=Object.keys(a.Article).map(function(b){var c=a.Article[b].prototype||null,d=Object.create(c);return"function"==typeof d.transform?d:null}).filter(function(a){return null!==a});return c.forEach(function(a){return b.transformContent(a)}),b},b.inlineAnnotatedConstructor=["$http","$q","$cacheFactory","$sce",b],b}();b.ContentService=c,angular.module("blogapp").service("ContentService",c.inlineAnnotatedConstructor)}(b=a.Service||(a.Service={}))}(Blog||(Blog={}));