var Blog;!function(a){var b;!function(a){var b=function(){function b(a,c,d,e,f){var g=this;this.ContentService=a,this.$stateParams=c,this.$scope=d,this.$location=e,this.CONFIG=f,this.isSearchList=!1,this.listType=d.listType||c.listType,this.isSearchList="search"===this.listType,this.sortReverse="true"===d.sortReverse,this.pageIndex=d.sortReverse?parseInt(d.sortReverse):c.pageIdx||0,this.inject=b.parseInject(d.inject||""),this.searchTerm=this.$location.search().q,this.itemsPerPage=f.get("ITEMS_PER_PAGE",5),this.ContentService.getMetaArticles().then(function(a){return g.currentPage=Common.Page.partitionAndGetFirstPage(g.getStrategy(g.listType,g.sortReverse).itemsList(a),g.itemsPerPage),g.advanceToPage(),a}),this.searchTerm&&this.search()}return Object.defineProperty(b.prototype,"isSearch",{get:function(){return this.isSearchList},enumerable:!0,configurable:!0}),b.parseInject=function(a){if(a=(a+"").trim(),0===a.length)return{};var b={},c=a.split(";");return c.forEach(function(a){var c=a.split("=");b[c[0]]=c[1]}),b},b.prototype.advanceToPage=function(){for(var a=this.pageIndex;a-- >0;)this.currentPage=this.currentPage.next},b.prototype.search=function(){var a=this;this.$location.search({q:this.searchTerm}),this.$scope.$root.$uiStateData.title="search"+(angular.isString(this.searchTerm)&&this.searchTerm.length?":"+this.searchTerm:""),this.ContentService.getMetaArticles().then(function(b){a.currentPage=Common.Page.partitionAndGetFirstPage(a.getStrategy(a.listType,a.sortReverse).itemsList(b),a.itemsPerPage),a.advanceToPage()})},b.prototype.gotoPrevPage=function(){this.currentPage=this.currentPage.prev},b.prototype.gotoNextPage=function(){this.currentPage=this.currentPage.next},b.prototype.getStrategy=function(b,c,d){void 0===b&&(b="all"),void 0===c&&(c=!1),void 0===d&&(d=!1);var e=Object.keys(a).filter(function(c){return"function"==typeof a[c].canHandle&&new a[c]instanceof Common.AListStrategy&&a[c].canHandle(b)});if(0===e.length){if(d)throw new Error("Unknown list-type strategy: "+b);return new a.ListAllStrategy(b,c)}var f=new a[e[0]](b,c),g=this.$location.search();g.hasOwnProperty("q")&&f.inject("locationSearch",g.q);for(var h in this.inject)f.inject(h,this.inject[h]);return f},b.inlineAnnotatedConstructor=["ContentService","$stateParams","$scope","$location","CONFIG",b],b}();a.ArticleListController=b,angular.module("blogapp").controller("ArticleListController",b.inlineAnnotatedConstructor)}(b=a.ArticleList||(a.ArticleList={}))}(Blog||(Blog={}));